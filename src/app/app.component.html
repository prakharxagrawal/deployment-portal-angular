<div class="main-bg">
  <header class="main-header">
    <div class="header-title">{{ title }}</div>
    <div class="header-user" *ngIf="user">Logged in as: <b>{{ user.username }}</b> ({{ user.role }})</div>
  </header>
  <div class="container">
    <div *ngIf="showLogin" class="login-wrapper">
      <app-login (login)="user = $event; showLogin = false"></app-login>
    </div>
    <div *ngIf="!showLogin" class="main-content new-layout">
      <div class="side-panel">
        <h2>Requests</h2>
        <div class="request-list" cdkScrollable>
          <div class="request-item" *ngFor="let deployment of deployments" (click)="selectDeployment(deployment)" [class.selected]="deployment === selectedDeployment">
            {{ deployment.serialNumber }}
          </div>
        </div>
        <div class="side-actions">
          <button mat-stroked-button color="warn" (click)="logout()">Logout</button>
        </div>
      </div>
      <div class="main-panel">
        <div class="main-panel-header">
          <button mat-raised-button color="primary" class="new-request-btn" (click)="openNewRequestForm()">New Request</button>
          <div class="main-filters">
            <mat-form-field appearance="fill">
              <mat-label>Status</mat-label>
              <mat-select>
                <mat-option value="">All Statuses</mat-option>
                <mat-option value="Open">Open</mat-option>
                <mat-option value="In Progress">In Progress</mat-option>
                <mat-option value="Pending">Pending</mat-option>
                <mat-option value="Completed">Completed</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Environment</mat-label>
              <mat-select>
                <mat-option value="">All Environments</mat-option>
                <mat-option value="UAT1">UAT1</mat-option>
                <mat-option value="UAT2">UAT2</mat-option>
                <mat-option value="UAT3">UAT3</mat-option>
                <mat-option value="DEV1">DEV1</mat-option>
                <mat-option value="DEV2">DEV2</mat-option>
                <mat-option value="DEV3">DEV3</mat-option>
                <mat-option value="PERF">PERF</mat-option>
                <mat-option value="PROD">PROD</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Release</mat-label>
              <mat-select>
                <mat-option value="">All Releases</mat-option>
                <mat-option *ngFor="let release of releases" [value]="release">{{ release }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="main-panel-content">
          <app-deployment [deployment]="selectedDeployment" [releases]="releases" [user]="user"></app-deployment>
        </div>
        <div class="main-panel-footer">
          <app-report [releases]="releases"></app-report>
        </div>
      </div>
    </div>
    <footer class="footer">Developed by Prakhar Agrawal (SOEID: PA54075)</footer>
  </div>
</div>